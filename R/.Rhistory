nr <- 2
setwd("~/XML-parse/R")
library('XML')
library('dplyr')
library('readr')
library('plyr')
xmlfile <- xmlParse('../../test2.xml')
#getting the root
top <- xmlRoot(xmlfile)
#creating list
tmp <- list()
cutF <- 7310
#count the nodes in actions
childNodeActions <- top[[nr]][['Patient']][['Actions']]
size <- xmlSize(childNodeActions)
size
#find the REM node
n <- NULL
for (i in seq(1,size-1,1)){
if (xmlValue(childNodeActions[[i]][['Description']]) == 'REM440 data left ear'){
n <- c(n,i)
}
}
### if no REM return empty list
if(!is.null(n)){
#extract REUG (last date)
size <- xmlSize(childNodeActions[[max(n)]][['PublicData']][['HIMSARemStandard']][['RealEarData']][['RealEarUnaidedResponse']])
tmp$REUG_left <- 0
tmp$f <- 0
for (l in seq(1,size-1,1)){
tmp$REUG_left <- c(tmp$REUG_left,as.numeric(xmlValue(childNodeActions[[max(n)]][['PublicData']][['HIMSARemStandard']][['RealEarData']][['RealEarUnaidedResponse']][[l + 1]][['Output']])))
tmp$f <- c(tmp$f,as.numeric(xmlValue(childNodeActions[[max(n)]][['PublicData']][['HIMSARemStandard']][['RealEarData']][['RealEarUnaidedResponse']][[l + 1]][['Frequency']])))
}
v
sasd
xcv
ret
REM_XTRACT_v2 <- function(xmlfile,nr) {
#getting the root
top <- xmlRoot(xmlfile)
#creating list
tmp <- list()
cutF <- 7310
#count the nodes in actions
childNodeActions <- top[[nr]][['Patient']][['Actions']]
size <- xmlSize(childNodeActions)
###################################################################### for left ear######################################################################
#find the REM node
n <- NULL
for (i in seq(1,size-1,1)){
if (xmlValue(childNodeActions[[i]][['Description']]) == 'REM440 data left ear'){
n <- c(n,i)
}
}
### if no REM return empty list
if(!is.null(n)){
#extract REUG (last date)
size <- xmlSize(childNodeActions[[max(n)]][['PublicData']][['HIMSARemStandard']][['RealEarData']][['RealEarUnaidedResponse']])
tmp$REUG_left <- 0
tmp$f <- 0
for (l in seq(1,size-1,1)){
tmp$REUG_left <- c(tmp$REUG_left,as.numeric(xmlValue(childNodeActions[[max(n)]][['PublicData']][['HIMSARemStandard']][['RealEarData']][['RealEarUnaidedResponse']][[l + 1]][['Output']])))
tmp$f <- c(tmp$f,as.numeric(xmlValue(childNodeActions[[max(n)]][['PublicData']][['HIMSARemStandard']][['RealEarData']][['RealEarUnaidedResponse']][[l + 1]][['Frequency']])))
}
}
}
asd
../../test2.xml../../test2.xml../../test2.xml../../test2.xml
asd
